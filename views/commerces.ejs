<!DOCTYPE html>
<html lang="es"> 
    <head>
        <% include ../views/partials/head %>
        <script async defer                
                src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSp6AeC4g54R-IraDQ8LBhDviAEkZT7Uw&callback=initMap">
        </script>
        <script type="text/javascript">
            function initMap() {
                var map = new google.maps.Map(document.getElementById('map'), {
                    zoom: 5,
                    center: {lat: 24.886, lng: -70.268},
                    mapTypeId: google.maps.MapTypeId.TERRAIN
                });

                // Define the LatLng coordinates for the polygon's path.
                var triangleCoords = [
                    {lat: 25.774, lng: -80.190},
                    {lat: 18.466, lng: -66.118},
                    {lat: 32.321, lng: -64.757},
                    {lat: 25.774, lng: -80.190}
                ];

                // Construct the polygon.
                var bermudaTriangle = new google.maps.Polygon({
                    paths: triangleCoords,
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: '#FF0000',
                    fillOpacity: 0.35
                });
                
                bermudaTriangle.setMap(map);
                
                var area = google.maps.geometry.spherical.computeArea(triangleCoords);
            }           

            console.log(area);
        </script>
    </head>
    <body class="container">
        <header>
            <% include ../views/partials/header %>
        </header>
        
        <main>
            <div class="panel panel-default">
                <div class="panel-body">
                    <div id="map" style="height:300px;"></div>                
                </div>
            </div>
            <button type="button" class="btn btn-md" data-toggle="modal" data-target="#new-commerce-modal">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Nuevo
            </button>
            <br>
            <div class="table-responsive">
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Cod.</th>
                            <th>Nomber</th>
                            <th>Latitud</th>
                            <th>Longitud</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% commerces.forEach(function(commerce) { %>
                            <tr>
                                <th><%= commerce.id%></th>
                                <th><%= commerce.code %></th>
                                <th><%= commerce.name %></th>
                                <th><%= commerce.longitude %></th>
                                <th><%= commerce.latitude %></th>
                                <th>
                                    <div class="btn-group" role="group">
                                        <button type="button" data-id="<%= commerce.id %>" class="btn btn-default btn-sm editButton" data-toggle="modal" data-target="#edit-commerce-modal">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar
                                        </button>
                                        <button type="button" data-id="<%= commerce.id %>" class="btn btn-default btn-sm editButton" data-toggle="modal" data-target="#confirm-destroy">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Eliminar
                                        </button>
                                    </div>
                                </th>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </main>
        
        <footer>
            <% include ../views/partials/footer %>
        </footer>
    </body>

</html>

<% include ../views/partials/new-commerce-modal %>
<% include ../views/partials/edit-commerce-modal %>
<% include ../views/partials/confirm-destroy %>